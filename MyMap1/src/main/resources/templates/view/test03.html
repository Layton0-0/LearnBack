<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Geocoder | 주소와 좌표 검색 API 사용하기</title>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script type="text/javascript" th:href="@{/js/examples-base.js}"></script>
<script type="text/javascript" th:href="@{/js/highlight.min.js}"></script>
<script type="text/javascript"
	src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=gprzi6125i"></script>

<link rel="stylesheet" th:href="@{/css/examples-base.css}" />
</head>
<body>

	<div id="map"
		style="width: 100%; height: 75vh; margin: 0 auto; float: left"></div>
	<script type="text/javascript">	
		
			var map = new naver.maps.Map('map', {
				center : new naver.maps.LatLng(37.5666805, 126.9784147),
				zoom : 10,
				mapTypeId : naver.maps.MapTypeId.NORMAL
			});
			var infowindow = new naver.maps.InfoWindow();
			function onSuccessGeolocation(position) {
			    var location = new naver.maps.LatLng(position.coords.latitude,
			                                         position.coords.longitude);

			    map.setCenter(location); // 얻은 좌표를 지도의 중심으로 설정합니다.
			    map.setZoom(10); // 지도의 줌 레벨을 변경합니다.

			    infowindow.setContent('<div style="padding:20px;">' + 'geolocation.getCurrentPosition() 위치' + '</div>');

			    infowindow.open(map, location);
			    console.log('Coordinates: ' + location.toString());
			}

			function onErrorGeolocation() {
			    var center = map.getCenter();

			    infowindow.setContent('<div style="padding:20px;">' +
			        '<h5 style="margin-bottom:5px;color:#f00;">Geolocation failed!</h5>'+ "latitude: "+ center.lat() +"<br />longitude: "+ center.lng() +'</div>');

			    infowindow.open(map, center);
			}

			$(window).on("load", function() {
			    if (navigator.geolocation) {			     
			        navigator.geolocation.getCurrentPosition(onSuccessGeolocation, onErrorGeolocation);
			    } else {
			        var center = map.getCenter();
			        infowindow.setContent('<div style="padding:20px;"><h5 style="margin-bottom:5px;color:#f00;">Geolocation not supported</h5></div>');
			        infowindow.open(map, center);
			    }
			});
		
	</script>
</body>
</html>